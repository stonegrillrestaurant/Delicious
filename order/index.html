<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stone Grill - Online Order</title>
  <meta name="description" content="Order food online from Stone Grill Restaurant.">
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: #f9f9f9;
      font-family: Arial, sans-serif;
    }
    .container {
      max-width: 700px;
      margin: 0 auto;
      padding: 20px;
    }
    .section-box {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      padding: 20px;
      margin-bottom: 30px;
    }
    h1, h2 {
      text-align: center;
      color: #b22222;
    }
    label {
      display: block;
      margin: 12px 0 5px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background: #b22222;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background: #951d1d;
    }
    .selectable-item {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.15s;
    }
    .selectable-item.selected {
      background: #b22222;
      color: #fff;
      font-weight: bold;
    }
    #cartItems {
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }
    .cart-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 15px;
    }
    .cart-row .left {
      display: flex;
      align-items: center;
      gap: 8px;
      max-width: 70%;
      overflow-wrap: break-word;
    }
    .cart-row .delete-btn {
      background: transparent;
      color: #b22222;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }
    .cart-row .right {
      font-weight: bold;
      min-width: 60px;
      text-align: right;
    }
    .cart-total {
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Stone Grill Order Form</h1>

    <div class="section-box">
      <form id="fullOrderForm">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="mobile">Mobile Number:</label>
        <input type="tel" id="mobile" name="mobile" required>

        <label for="orderType">Order Type:</label>
        <select id="orderType" name="orderType" onchange="togglePersons()" required>
          <option value="">-- Select --</option>
          <option value="Dine-in">Dine-in</option>
          <option value="Take-out">Take-out</option>
        </select>

        <div id="personCount" style="display:none;">
          <label for="persons">Number of Persons:</label>
          <input type="number" id="persons" name="persons" min="1">
        </div>

        <label for="datetime">Date and Time:</label>
        <input type="datetime-local" id="datetime" name="datetime" required>
      </form>
    </div>

    <div class="section-box">
      <label for="category">Select MENU:</label>
      <select id="category" onchange="updateItems()" required>
        <option value="">-- CHOOSE MENU --</option>
        <option value="pork">PORK</option>
        <option value="chicken">CHICKEN</option>
        <option value="vegetable">VEGETABLES</option>
        <option value="noodles">NOODLES</option>
        <option value="rice">RICE</option>
        <option value="beef">BEEF</option>
        <option value="fish">FISH</option>
      </select>
      <div id="itemSelection" style="margin-top: 20px;"></div>
      <button type="button" id="addSelectedBtn">Add Selected</button>

      <h3>Ordered Items:</h3>
      <div id="cartItems"></div>
      <div class="cart-total">Total: ‚Ç±<span id="dropdownTotal">0</span></div>

      <label for="requests">Special Requests:</label>
      <textarea id="requests" name="requests" rows="3"></textarea>

      <button type="submit" form="fullOrderForm">Submit Order</button>
    </div>
  </div>

  <script>
    const menuItems = {
      pork: [ { name: "Pork Sisig", price: 199 }, { name: "Lechon Kawali", price: 229 }, { name: "Pork BBQ", price: 120 } ],
      chicken: [ { name: "Fried Chicken", price: 179 }, { name: "Buffalo Wings", price: 189 }, { name: "Grilled Chicken", price: 199 } ],
      vegetable: [ { name: "Chopsuey", price: 159 }, { name: "Pinakbet", price: 149 }, { name: "Ginataang Gulay", price: 169 } ],
      noodles: [ { name: "Pancit Canton", price: 139 }, { name: "Bam-i", price: 149 }, { name: "Sotanghon Guisado", price: 139 } ],
      rice: [ { name: "Cup Rice", price: 25 }, { name: "Platter Rice", price: 100 }, { name: "Fried Rice", price: 200 } ],
      beef: [ { name: "Beef Steak", price: 300 }, { name: "Beef Mushroom", price: 310 }, { name: "Caldereta", price: 320 } ],
      fish: [ { name: "Tilapia", price: 199 }, { name: "Grilled Bangus", price: 219 }, { name: "Sweet & Sour", price: 229 } ]
    };

    let cart = [], selectedItems = [];

    function togglePersons() {
      const orderType = document.getElementById("orderType").value;
      document.getElementById("personCount").style.display = (orderType === "Dine-in") ? "block" : "none";
    }

    function updateItems() {
      const cat = document.getElementById("category").value;
      const wrap = document.getElementById("itemSelection");
      wrap.innerHTML = "";
      selectedItems = [];
      if (menuItems[cat]) {
        menuItems[cat].forEach((item, idx) => {
          const row = document.createElement("div");
          row.className = "selectable-item";
          row.innerHTML = `<span>${item.name} (‚Ç±${item.price})</span>`;
          row.onclick = () => toggleHighlight(row, cat, idx);
          wrap.appendChild(row);
        });
      }
    }

    function toggleHighlight(row, cat, idx) {
      const key = cat + '-' + idx;
      const selIndex = selectedItems.indexOf(key);
      if (selIndex >= 0) {
        selectedItems.splice(selIndex, 1);
        row.classList.remove("selected");
      } else {
        selectedItems.push(key);
        row.classList.add("selected");
      }
    }

    document.getElementById("addSelectedBtn").onclick = () => {
      selectedItems.forEach(key => {
        const [cat, idx] = key.split('-');
        const item = menuItems[cat][parseInt(idx)];
        if (!cart.some(ci => ci.name === item.name)) {
          cart.push({ ...item, qty: 1 });
        }
      });
      selectedItems = [];
      document.querySelectorAll('.selectable-item').forEach(row => row.classList.remove("selected"));
      renderCart();
    };

    function removeFromCart(idx) {
      cart.splice(idx, 1);
      renderCart();
    }

    function renderCart() {
      const cartDiv = document.getElementById("cartItems");
      cartDiv.innerHTML = "";
      let total = 0;
      if (!cart.length) {
        cartDiv.innerHTML = "<em>No items yet.</em>";
        return;
      }
      cart.forEach((item, idx) => {
        total += item.qty * item.price;
        const row = document.createElement("div");
        row.className = "cart-row";
        row.innerHTML = `
          <div class="left">
            <button class="delete-btn" onclick="removeFromCart(${idx})">üóëÔ∏è</button>
            <span>${item.qty}x</span>
            <span>${item.name}</span>
          </div>
          <div class="right">‚Ç±${item.qty * item.price}</div>
        `;
        cartDiv.appendChild(row);
      });
      document.getElementById("dropdownTotal").textContent = total;
    }

    window.removeFromCart = removeFromCart;
  </script>
</body>
</html>
