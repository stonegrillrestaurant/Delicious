<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stone Grill - Full Order Form</title>
  <meta name="description" content="Order food online from Stone Grill Restaurant.">
  <meta property="og:title" content="Stone Grill Online Order Form">
  <meta property="og:description" content="Place your order, choose dine-in or takeout, and schedule your pickup time.">
  <meta property="og:image" content="https://stonegrillresto.net/order/assets/whitelogo.png">
  <meta property="og:url" content="https://stonegrillresto.net/order/">
  <meta name="theme-color" content="#b22222">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1 style="text-align:center;">Stone Grill Order Form</h1>

    <form id="fullOrderForm">
      <label for="name">Full Name:</label>
      <input type="text" id="name" name="name" required>

      <label for="mobile">Mobile Number:</label>
      <input type="tel" id="mobile" name="mobile" required>

      <label for="orderType">Order Type:</label>
      <select id="orderType" name="orderType" onchange="togglePersons()" required>
        <option value="">-- Select --</option>
        <option value="Dine-in">Dine-in</option>
        <option value="Take-out">Take-out</option>
      </select>

      <div id="personCount" style="display:none;">
        <label for="persons">Number of Persons:</label>
        <input type="number" id="persons" name="persons" min="1">
      </div>

      <label for="datetime">DATE:     TIME:</label>
      <input type="datetime-local" id="datetime" name="datetime" required>

      <label for="category">Select MENU:</label>
      <select id="category" onchange="updateItems()" required>
        <option value="">-- CHOOSE MENU --</option>
        <option value="pork">PORK</option>
        <option value="chicken">CHICKEN</option>
        <option value="vegetable">VEGETABLES</option>
        <option value="noodles">NOODLES</option>
        <option value="rice">RICE</option>
        <option value="beef">BEFF</option>
        <option value="fish">FISH</option>
      </select>

      <div id="itemSelection" style="margin-top: 20px;"></div>

      <label for="requests">Special Requests:</label>
      <textarea id="requests" name="requests" rows="3" style="width:100%;"></textarea>

      <h3>Total: ₱<span id="dropdownTotal">0</span></h3>
      <button type="submit" style="margin-top: 10px;">Submit Order</button>
    </form>

    <div id="orderSummary" class="hidden">
      <h2>Order Summary</h2>
      <div id="summaryText"></div>
    </div>
  </div>

  <script>
    const menuItems = {
      set-meals: [
        { name: "Set-A", price: 1,100 },
        { name: "Set-B", price: 1000 },
        { name: "Set_C", price: 1,980 }
        { name: "Boodle", price: 2,300 }
      ],
      rice: [
        { name: "Cup Rice", price: 25 },
        { name: "Platter Rice", price: 100 },
        { name: "Stone Grill Fried Rice", price: 200 }
      ],
      pork: [
        { name: "Pork Sisig", price: 199 },
        { name: "Lechon Kawali", price: 229 },
        { name: "Pork BBQ (2 sticks)", price: 120 }
      ],
      chicken: [
        { name: "Fried Chicken", price: 179 },
        { name: "Buffalo Wings", price: 189 },
        { name: "Grilled Chicken", price: 199 }
      ],
      rice: [
        { name: "Cup Rice", price: 25 },
        { name: "Platter Rice", price: 100 },
        { name: "Stone Grill Fried Rice", price: 200 }
      ],
      beef: [
        { name: "Beef Steak", price: 300 },
        { name: "beef with Mushroom", price: 310 },
        { name: "Beef Caldereta", price: 320 }
      ],
      vegetable: [
        { name: "Chopsuey", price: 159 },
        { name: "Pinakbet", price: 149 },
        { name: "Ginataang Gulay", price: 169 }
      ],
      noodles: [
        { name: "Pancit Canton", price: 139 },
        { name: "Bam-i", price: 149 },
        { name: "Sotanghon Guisado", price: 139 }
      ],
      fish: [
        { name: "Fried Tilapia", price: 199 },
        { name: "Grilled Bangus", price: 219 },
        { name: "Sweet & Sour Fish", price: 229 }
      ]
    };

    function togglePersons() {
      const orderType = document.getElementById("orderType").value;
      document.getElementById("personCount").style.display = (orderType === "Dine-in") ? "block" : "none";
    }

    function updateItems() {
      const category = document.getElementById("category").value;
      const itemDiv = document.getElementById("itemSelection");
      itemDiv.innerHTML = "";

      if (menuItems[category]) {
        menuItems[category].forEach((item, index) => {
          const row = document.createElement("div");
          row.innerHTML = `
            <label>${item.name} (₱${item.price})</label>
            <input type="number" min="0" value="0" data-price="${item.price}" class="itemQty" name="${category}-${index}" style="width: 100%; margin-bottom: 10px; padding: 8px;">
          `;
          itemDiv.appendChild(row);
        });
      }

      updateDropdownTotal();
      document.querySelectorAll(".itemQty").forEach(input => {
        input.addEventListener("input", updateDropdownTotal);
      });
    }

    function updateDropdownTotal() {
      let total = 0;
      document.querySelectorAll(".itemQty").forEach(input => {
        const quantity = parseInt(input.value) || 0;
        const price = parseFloat(input.dataset.price);
        total += quantity * price;
      });
      document.getElementById("dropdownTotal").textContent = total;
    }

    document.getElementById("fullOrderForm").addEventListener("submit", function(e) {
      e.preventDefault();
      let summary = "<strong>Customer Info:</strong><br>";
      summary += "Name: " + document.getElementById("name").value + "<br>";
      summary += "Mobile: " + document.getElementById("mobile").value + "<br>";
      summary += "Order Type: " + document.getElementById("orderType").value + "<br>";
      if (document.getElementById("orderType").value === "Dine-in") {
        summary += "Persons: " + document.getElementById("persons").value + "<br>";
      }
      summary += "Pickup Time: " + document.getElementById("datetime").value + "<br><br>";
      summary += "<strong>Ordered Items:</strong><br>";

      document.querySelectorAll(".itemQty").forEach(input => {
        const qty = parseInt(input.value);
        if (qty > 0) {
          const label = input.previousElementSibling.textContent;
          summary += `${label} x ${qty}<br>`;
        }
      });

      summary += "<br><strong>Special Requests:</strong> " + document.getElementById("requests").value + "<br>";
      summary += "<strong>Total:</strong> ₱" + document.getElementById("dropdownTotal").textContent;

      document.getElementById("summaryText").innerHTML = summary;
      document.getElementById("orderSummary").classList.remove("hidden");
    });
  </script>
</body>
</html>
