/* =========================================
   STONE GRILL — Reflections (Clean Unified)
   Works for: index cards + read.html
   ========================================= */

/* ===== Theme (fallbacks; safe if you also set these inline) ===== */
:root{
  --bg:#1f1815;
  --paper:#2a211e;
  --ink:#f3e6dd;
  --muted:#c9b0a4;
  --accent:#ff6a3e;   /* main accent */
  --accent2:#f7b733;  /* gradient accent (header) */
  --line:#3a2f2b;     /* hairline stroke */
}

/* ===== Base ===== */
*{box-sizing:border-box}
html,body{margin:0}
body{font-family:Georgia, ui-serif, serif; background:var(--bg); color:var(--ink);}
a{color:inherit; text-decoration:none}
a:hover{text-decoration:underline}

/* =========================================
   CARD LAYOUT (index)
   ========================================= */
article.card{
  display:grid;
  grid-template-columns:160px 1fr;  /* left cover | right content */
  column-gap:16px;
  align-items:start;
  background:var(--paper);
  border:2px solid var(--accent);   /* matches your index border */
  border-radius:16px;
  padding:14px;
  margin-bottom:18px;
  transition:transform .15s ease, box-shadow .15s ease;
}
article.card:hover{ transform:translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,.35); }

article.card .left{ grid-column:1; display:flex; justify-content:center; }
article.card .right{ grid-column:2; min-width:0; } /* min-width:0 fixes iOS wrap */

/* Cover image — force visible and consistent */
img.book-cover{
  display:block;
  width:150px; height:220px;        /* card size */
  object-fit:cover;
  border-radius:10px;
  box-shadow:0 8px 20px rgba(0,0,0,.35);
  background:#111;                  /* shows even if image missing */
}

/* Titles + meta */
article.card h3{ margin:0 0 6px; font-size:1.05rem; line-height:1.2; }
.title-link{ color:inherit; }
.right p{ margin:4px 0 8px; color:var(--muted); font-size:.95rem; }
.meta{ font-size:.9rem; color:var(--muted); }

/* Card action rows (share left | buttons right) */
.cover-actions{
  margin-top:6px;
  display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap;
}

/* Action groups (support both classes you use) */
.action-group, .action-buttons{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
}

/* =========================================
   BUTTONS (share + read/download + listen)
   ========================================= */
.btn{
  display:inline-flex; align-items:center; gap:6px;
  padding:8px 12px;
  border:1px solid var(--line);
  border-radius:8px;
  background:var(--accent);
  color:#fff;
  font:600 .9rem/1.2 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  cursor:pointer;
  transition:filter .15s ease, opacity .15s ease;
}
.btn:hover{ filter:brightness(.95); }

/* Variants used in your page */
.btn.read, .btn-read{ background:var(--accent); color:#fff; border-color:transparent; }
.btn.down, .btn-download{ background:#a94a1e; color:#fff; border-color:transparent; }
.btn.listen{ background:#ff6b2b; color:#fff; border-color:transparent; }

.btn.fb{ background:#1877F2; border-color:#1877F2; color:#fff; }
.btn.msg{ background:#0084FF; border-color:#0084FF; color:#fff; }

/* Share bar container (works with your enhancer JS or the global share system) */
.share-group{ display:flex; gap:8px; align-items:center; }
.card .share-group .btn{ padding:6px 10px; font-size:.85rem; line-height:1.15; }

/* =========================================
   AUDIO (index + read.html)
   ========================================= */
.audio-section, .audio{ text-align:center; margin:10px 0 0; }
.audio-label, .audio .label{ font-size:.95rem; color:#ffb380; margin:0 0 6px; }
.audio-player, .audio audio{
  width:100%; max-width:650px; height:28px;
  border-radius:6px; background:#2b201d;
}
.audio-stop, #stopBtn{
  margin-top:6px; background:#ff6b2b; color:#fff; border:none;
  padding:6px 14px; border-radius:6px; cursor:pointer;
}
.audio-stop:hover, #stopBtn:hover{ background:#ff8752; }

/* =========================================
   READ PAGE (optional polish; safe defaults)
   ========================================= */
.read-header img{ width:120px; height:auto; border-radius:8px; margin-bottom:10px; }
.read-header h1{ color:var(--accent); font-size:1.8em; margin-bottom:.3em; }
.read-header p.meta{ color:var(--muted); font-size:.9em; margin-bottom:1.2em; }

/* =========================================
   RESPONSIVE
   ========================================= */
@media (max-width:700px){
  article.card{
    grid-template-columns:140px 1fr;
    padding:12px;
  }
  img.book-cover{ width:130px; height:190px; }
  .btn{ padding:6px 10px; font-size:.85rem; }
}

@media (max-width:520px){
  article.card{
    grid-template-columns:1fr; row-gap:12px;
  }
  .left{ justify-content:center; }
  .right{ text-align:center; }
  .cover-actions{ justify-content:center; }
  .action-group, .action-buttons{ justify-content:center; }
  .share-group{ justify-content:center; }
  .audio-player, .audio audio{ width:100%; }
}
/* === Right-side cleanup (cards) === */
article.card{ grid-template-columns:160px minmax(0,1fr); }

article.card .right{
  padding-inline:12px;
  min-width:0;                 /* critical for iOS wrapping */
  display:grid;
  row-gap:10px;                /* consistent vertical rhythm */
  align-content:start;
}
article.card .right > *{ max-width:100%; }   /* stop overflow */

article.card h3{ margin:2px 0 4px; line-height:1.2; }
article.card p{ margin:0 0 8px; }

/* Share + actions: neat two-row flow */
.cover-actions{
  display:grid;
  grid-template-columns: 1fr auto;  /* left: share | right: buttons */
  gap:10px;
  align-items:center;
}
.share-group{ justify-content:flex-start; flex-wrap:wrap; gap:8px; }
.action-group .btn{ margin:0; }
.action-group{ justify-content:flex-end; }

/* Keep buttons from squeezing text */
.card .share-group .btn{ padding:8px 10px; font-size:13px; line-height:1.15; }
.btn{ white-space:nowrap; }

/* Mobile: stack cleanly and center */
@media (max-width:700px){
  .cover-actions{
    grid-template-columns:1fr;
    row-gap:8px;
  }
  .action-group, .share-group{ justify-content:center; }
}